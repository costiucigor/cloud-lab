<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Module 4 - VPC Networking | Cloud Technologies</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/module-page.css">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="navbar">
    <div class="nav-brand">
      <a href="../index.html" style="display: flex; align-items: center; gap: 12px; text-decoration: none;">
        <span class="logo">‚òÅÔ∏è</span>
        <span class="brand-text">Cloud Technologies</span>
      </a>
    </div>
  </nav>

  <main class="module-page">
    <div class="module-header">
      <div class="module-badge">Module 04</div>
      <h1>üîí VPC Networking</h1>
      <p>Virtual Private Cloud, Subnets, and Firewall Rules</p>
    </div>

    <div class="module-content">
      <section class="content-section">
        <h2>VPC Concepts</h2>
        <div class="features-grid">
          <div class="feature-item">
            <span class="feature-icon">üåê</span>
            <h4>VPC Network</h4>
            <p>Global virtual network spanning all regions</p>
          </div>
          <div class="feature-item">
            <span class="feature-icon">üìç</span>
            <h4>Subnets</h4>
            <p>Regional IP address ranges within VPC</p>
          </div>
          <div class="feature-item">
            <span class="feature-icon">üõ°Ô∏è</span>
            <h4>Firewall Rules</h4>
            <p>Control ingress/egress traffic</p>
          </div>
          <div class="feature-item">
            <span class="feature-icon">üè∑Ô∏è</span>
            <h4>Network Tags</h4>
            <p>Apply rules to specific VMs</p>
          </div>
        </div>
      </section>

      <section class="content-section">
        <h2>Firewall Rule Types</h2>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
          <div class="exercise-card">
            <h4 style="color: var(--accent-secondary);">üü¢ Ingress (Incoming)</h4>
            <p>Traffic coming INTO VMs</p>
            <ul style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px;">
              <li>Allow SSH from anywhere</li>
              <li>Allow HTTP from internet</li>
              <li>Allow MySQL from web server only</li>
            </ul>
          </div>
          <div class="exercise-card">
            <h4 style="color: var(--accent-tertiary);">üî¥ Egress (Outgoing)</h4>
            <p>Traffic going OUT of VMs</p>
            <ul style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px;">
              <li>Block all outbound by default</li>
              <li>Allow specific destinations</li>
              <li>Restrict data exfiltration</li>
            </ul>
          </div>
        </div>
      </section>

      <section class="content-section">
        <h2>Complete VPC Setup</h2>
        
        <div class="command-section">
          <h4>1. Create VPC Network</h4>
          <div class="command-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>gcloud compute networks create demo-vpc-1 \
  --subnet-mode=custom \
  --bgp-routing-mode=regional</code>
          </div>
        </div>

        <div class="command-section">
          <h4>2. Create Subnet</h4>
          <div class="command-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code>gcloud compute networks subnets create subnet-1 \
  --network=demo-vpc-1 \
  --region=us-central1 \
  --range=10.1.0.0/16</code>
          </div>
        </div>

        <div class="command-section">
          <h4>3. Create Firewall Rules</h4>
          <div class="command-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code># Allow ICMP (ping) from anywhere
gcloud compute firewall-rules create demo-vpc-1-allow-icmp \
  --network=demo-vpc-1 \
  --allow=icmp \
  --source-ranges=0.0.0.0/0

# Allow SSH to tagged VMs
gcloud compute firewall-rules create demo-vpc-1-allow-ssh \
  --network=demo-vpc-1 \
  --allow=tcp:22 \
  --source-ranges=0.0.0.0/0 \
  --target-tags=ssh-from-all

# Allow HTTP to tagged VMs
gcloud compute firewall-rules create demo-vpc-1-allow-http \
  --network=demo-vpc-1 \
  --allow=tcp:80 \
  --source-ranges=0.0.0.0/0 \
  --target-tags=http-from-all

# Allow MySQL only from web server IP
gcloud compute firewall-rules create demo-vpc-1-allow-mysql \
  --network=demo-vpc-1 \
  --allow=tcp:3306 \
  --source-ranges=10.1.0.2/32 \
  --target-tags=mysql-from-web-server</code>
          </div>
        </div>

        <div class="command-section">
          <h4>4. Create VMs in VPC</h4>
          <div class="command-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code># Web Server
gcloud compute instances create demo-vm-1 \
  --zone=us-central1-a \
  --machine-type=e2-micro \
  --network=demo-vpc-1 \
  --subnet=subnet-1 \
  --private-network-ip=10.1.0.2 \
  --tags=ssh-from-all,http-from-all

# Database Server
gcloud compute instances create demo-vm-2 \
  --zone=us-central1-a \
  --machine-type=e2-micro \
  --network=demo-vpc-1 \
  --subnet=subnet-1 \
  --private-network-ip=10.1.0.3 \
  --tags=ssh-from-all,mysql-from-web-server</code>
          </div>
        </div>
      </section>

      <section class="content-section">
        <h2>Cleanup</h2>
        <div class="command-section">
          <div class="command-block">
            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
            <code># Delete VMs
gcloud compute instances delete demo-vm-1 demo-vm-2 --zone=us-central1-a --quiet

# Delete Firewall Rules
gcloud compute firewall-rules delete demo-vpc-1-allow-icmp demo-vpc-1-allow-ssh \
  demo-vpc-1-allow-http demo-vpc-1-allow-mysql --quiet

# Delete Subnet and VPC
gcloud compute networks subnets delete subnet-1 --region=us-central1 --quiet
gcloud compute networks delete demo-vpc-1 --quiet</code>
          </div>
        </div>
      </section>
    </div>

    <div class="module-nav">
      <a href="module-3.html" class="nav-btn prev">‚Üê Module 3</a>
      <a href="module-5.html" class="nav-btn next">Module 5 ‚Üí</a>
    </div>
  </main>

  <script>
    function copyCode(btn) {
      const code = btn.parentElement.querySelector('code').textContent;
      navigator.clipboard.writeText(code).then(() => {
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = 'Copy', 2000);
      });
    }
  </script>
</body>
</html>
